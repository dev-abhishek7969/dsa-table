<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>DSA Problem Table</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #1e1e1e;
      color: #fff;
      margin: 0;
      padding: 20px;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-bottom: 60px;
    }
    th, td {
      border: 1px solid #444;
      padding: 10px;
      text-align: left;
    }
    .category-row {
      background-color: #333;
      font-weight: bold;
      cursor: pointer;
    }
    .code-btn {
      background-color: #007bff;
      color: #fff;
      border: none;
      padding: 6px 12px;
      cursor: pointer;
    }
    .code-btn:hover {
      background-color: #0056b3;
    }
    #codeModal {
      display: none;
      position: fixed;
      z-index: 9999;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0,0,0,0.6);
      align-items: center;
      justify-content: center;
    }
    #codeModalContent {
      background-color: #ffffff;
      color: #000000;
      padding: 20px;
      border-radius: 8px;
      max-width: 800px;
      width: 90%;
      max-height: 90%;
      overflow: auto;
    }
    pre {
      white-space: pre-wrap;
      color: #000000;
      font-family: Consolas, monospace;
    }
    .close-btn {
      float: right;
      font-size: 20px;
      cursor: pointer;
      color: #666;
    }
    .close-btn:hover {
      color: #000;
    }
    .toggle-icon {
      float: right;
      font-size: 16px;
      color: #ccc;
    }
    .hidden {
      display: none;
    }
    .category-row:hover {
      background-color: #444;
    }
  </style>
</head>
<body>

  <h1>DSA Problem Table</h1>
  <table>
    <tbody id="problem-table"></tbody>
  </table>

  <div id="codeModal">
    <div id="codeModalContent">
      <span class="close-btn" onclick="closeModal()">&times;</span>
      <pre id="codeText"></pre>
    </div>
  </div>

  <script>
    function generateDummyProblems(categoryName, startIndex) {
      const problems = [];
      for (let i = 1; i <= 20 - startIndex; i++) {
        const problemName = `${categoryName} Problem ${startIndex + i}`;
        const code = `// Code for ${problemName}
public class Solution {
  public void solve() {
    System.out.println("Solving ${problemName}");
  }
}`;
        problems.push({ name: problemName, code });
      }
      return problems;
    }

    const categories = [
      { name: "Linked List", problems: [] },
      { name: "Binary Search", problems: [] },
      { name: "Stack and Queue", problems: [] },
      { name: "Two Pointer", problems: [] },
      { name: "Simple Problem", problems: [] },
      { name: "Trickey Question", problems: [] }
    ];

    // Linked List problems
    const linkedListCategory = categories.find(cat => cat.name === "Linked List");
    linkedListCategory.problems.push(
      {
        name: "Detect cycle in linked list",
        code: `public ListNode detectCycle(ListNode head) {
  ListNode slow = head, fast = head;
  while (fast != null && fast.next != null) {
    fast = fast.next.next;
    slow = slow.next;
    if (slow == fast) {
      while (head != slow) {
        head = head.next;
        slow = slow.next;
      }
      return slow;
    }
  }
  return null;
}`
      },
      {
        name: "Intersection of Two Linked List",
        code: `public ListNode getIntersectionNode(ListNode headA, ListNode headB) {
  int a = getListLength(headA);
  int b = getListLength(headB);

  while (a > b) {
    headA = headA.next;
    a--;
  }
  while (b > a) {
    headB = headB.next;
    b--;
  }
  while (headA != headB) {
    headA = headA.next;
    headB = headB.next;
  }

  return headB;
}

private int getListLength(ListNode head) {
  int len = 0;
  while (head != null) {
    len++;
    head = head.next;
  }
  return len;
}`
      }
    );
    linkedListCategory.problems.push(...generateDummyProblems("Linked List", 2));

    // Binary Search problems
    const binarySearchCategory = categories.find(cat => cat.name === "Binary Search");
    binarySearchCategory.problems = [
      {
        name: "Binary Search",
        code: `public int search(int[] nums, int target) {
  int start = 0;
  int end = nums.length - 1;

  while (start <= end) {
    int mid = start + (end - start) / 2;
    if (target < nums[mid]) {
      end = mid - 1;
    } else if (target > nums[mid]) {
      start = mid + 1;
    } else {
      return mid;
    }
  }
  return -1;
}`
      },
      ...generateDummyProblems("Binary Search", 1)
    ];

    // Stack and Queue problems
    const stackQueueCategory = categories.find(cat => cat.name === "Stack and Queue");
    stackQueueCategory.problems = [
      {
        name: "Min Stack",
        code: `class MinStack {
  Stack<Integer> stack;
  Stack<Integer> minStack;

  public MinStack() {
    stack = new Stack<>();
    minStack = new Stack<>();
  }

  public void push(int val) {
    stack.push(val);
    if (minStack.isEmpty() || val <= minStack.peek()) {
      minStack.push(val);
    }
  }

  public void pop() {
    int popVal = stack.pop();
    if (popVal == minStack.peek()) {
      minStack.pop();
    }
  }

  public int top() {
    return stack.peek();
  }

  public int getMin() {
    return minStack.peek();
  }
}`,
      },
      {
        name: "Implement Stack using Queues",
        code: `class MyStack {

  private Queue<Integer> queue;

  public MyStack() {
    queue = new LinkedList<>();
  }

  public void push(int x) {
    queue.add(x);
    for (int i = 1; i < queue.size(); i++) {
      queue.add(queue.remove());
    }
  }

  public int pop() {
    return queue.remove();
  }

  public int top() {
    return queue.peek();
  }

  public boolean empty() {
    return queue.isEmpty();
  }
}`,
      },
      ...generateDummyProblems("Stack and Queue", 2)
    ];

    // Fill others with dummy problems
    categories.forEach(cat => {
      if (!cat.problems.length) {
        cat.problems = generateDummyProblems(cat.name, 0);
      }
    });

    const tbody = document.getElementById("problem-table");

    categories.forEach((category, index) => {
      // Category row
      const catRow = document.createElement("tr");
      catRow.classList.add("category-row");
      catRow.innerHTML = `<td colspan="2">${category.name} <span class="toggle-icon" id="toggle-${index}">➕</span></td>`;
      tbody.appendChild(catRow);

      // Problem rows
      const problemRows = [];

      category.problems.forEach(problem => {
        const row = document.createElement("tr");
        row.classList.add(`category-${index}`, "hidden");
        row.innerHTML = `
          <td>${problem.name}</td>
          <td><button class="code-btn">Code</button></td>
        `;
        tbody.appendChild(row);
        problemRows.push(row);

        row.querySelector('button').addEventListener('click', () => showCode(problem.code));
      });

      // Toggle handler
      catRow.addEventListener('click', () => {
        const icon = document.getElementById(`toggle-${index}`);
        const isHidden = problemRows[0].classList.contains('hidden');
        problemRows.forEach(row => row.classList.toggle('hidden'));
        icon.textContent = isHidden ? '➖' : '➕';
      });
    });

    function showCode(code) {
      document.getElementById("codeText").textContent = code || "// Code not added yet";
      document.getElementById("codeModal").style.display = "flex";
    }

    function closeModal() {
      document.getElementById("codeModal").style.display = "none";
    }
  </script>

</body>
</html>
